<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>组织结构设置</title>

    <!-- Bootstrap -->
    <link href="../vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="../vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!-- NProgress -->
    <link href="../vendors/nprogress/nprogress.css" rel="stylesheet">

    <!-- Custom Theme Style -->
    <!--<link href="../build/css/custom.min.css" rel="stylesheet">-->
    <style type="text/css">
        #yincang{
            width: 150px;height: 500px;margin:0 auto;float: left;border:1px solid  #000;

        }



    </style>
    <style>
        ul li{
            list-style: none;
        }
        ul .lefttop{
            width: 338px;
            display: inline-block;
            height: 40px;
            vertical-align: middle;
        }
        ul .leftfooter1{
            width: 600px;
            display: inline-block;
            height: 40px;
            vertical-align: middle;

        }
        ul .leftfooter{
            width: 600px;
            display: inline-block;
            height: 80px;
            line-height: 20px;
            vertical-align: middle;

        }
        .leftl{
            float: left;
            position: relative;
        }
        .rightr{
            position: absolute;
            left: 200px;
        }

    </style>
</head>

<body class="nav-md">
<div class="container body">
    <div class="main_container">

    </div>

    <div id="yincang">
        <form th:action="@{/org}" method="post">
            <input type="hidden" th:value="${department2.id}" name="id" >


            <ul >
                <li style="cursor:pointer" th:each="department:${departmentList} "th:if="${department.higherOffice}==0" >
              <a th:href="@{/orgadd(depNames=${department.depName}) }"   >    <i  id="add" name=""  class="fa fa-search-plus"></i>  </a>
                    <span id="a1" th:text="${department.depName}" th:value="${department.depName}"></span>
                </li>
                <ul>
                    <li style="cursor:pointer" th:each="department2:${departmentList}"  th:if="${department2.higherOffice}==1" id="sada">
                <a  th:href="@{/orgDet(depID=${department2.id})}"  onclick='return del();' >        <i  class="fa fa-search-minus"></i>    </a>
                        <span id="b2" th:text="${department2.depName}"th:value="${department2.depName}"></span>
                    </li>

                </ul>

            </ul>

        </form>
    </div>
    <!-- page content -->
    <div class="right_col" role="main">
        <div class="rightr">




            <div id="aaa" class="page-title">
                <form th:action="@{/org}" method="post" id="demo-form2" data-parsley-validate="" class="form-horizontal form-label-left" novalidate="">
                    <input type="hidden" id="idDep" name="idDep" th:value="idDep" >
                        <ul>
                        <li class="lefttop">
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" >组织编码:</label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input name="depCode"  type="text" id="depCode" required="required" class="form-control col-md-7 col-xs-12">
                                </div> <span id="err1" style="color: red">请输入！</span>
                            </div>
                        </li>
                        <li class="lefttop">
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" >所属组织:</label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input readonly="readonly" value="总裁办" type="text" id="" name="orgBelong" required="required" class="form-control col-md-7 col-xs-12">
                                </div>
                            </div>
                        </li>
                        <li class="lefttop">
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" >组织简称:</label>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <input  type="text" id="abbreviation" name="abbreviation" required="required" class="form-control col-md-7 col-xs-12">
                                </div><span id="err2" style="color: red">请输入！</span>
                            </div>
                        </li>

                        <li class="lefttop">
                            <div class="form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" >组织全称:</label>
                                <div class="col-md-6 col-sm-6 col-xs-12" id="psn">
                                    <input   id="depName" type="text" name="depName" data-validate-length-range="5,20" class="optional form-control col-md-7 col-xs-12">

                                </div><span id="err3" style="color: red">请输入！</span>



                            </div>
                        </li>

                        <li class="leftfooter1">
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12" for="address">住址:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <input  type="text" id="address" name="address" required="required" class="form-control col-md-7 col-xs-12">
                                </div>  <span id="err4" style="color: red">请输入！</span>
                            </div>
                        </li>
                        <li class="leftfooter">
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12" >简介:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <textarea id="introduction" name="introduction" class="form-control" ></textarea>
                                </div> <span id="err5" style="color: red">请输入！</span>
                            </div>
                            <br/>
                        </li><br/>

                        <li class="leftfooter">
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12" >备注:</label>
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    <textarea  id="remark" name="remark" class="form-control" ></textarea>
                                </div>  <span id="err6" style="color: red">请输入！</span>
                            </div>

                        </li>
                        <li class="leftfooter1">
                            <div class="form-group">
                                <label class="control-label col-md-2 col-sm-2 col-xs-12" for="address">是否启用</label>
                                <div class="col-md-8 col-sm-8col-xs-12">
                                    <select  id="enable" class="form-control" name="enable" >

<option>请选择</option>

                                        <option th:each="dictionary:${dictionaryList}" th:if="${dictionary.dataType}==enable" th:text="${dictionary.dataName}" th:value="${dictionary.id}" >-- 请选择 --


                                        </option>
                                    </select>
                                </div><span id="err7" style="color: red">请选择！</span>
                            </div>
                        </li>

                    </ul>

                    <ul class="form-group">
                        <li class="col-md-4 col-sm-4 col-xs-12 col-md-offset-3">
                          <!--  <button type="submit" class="btn btn-primary">保存</button>-->
                            <button id="tijiao" type="submit" class="btn btn-success"  onclick='return xiugai();' >提交</button>
                        </li>
                    </ul>

                </form>


            </div>

        </div>
    </div>



</div>
</div>

<!-- jQuery -->
<script src="../vendors/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="../vendors/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="../vendors/fastclick/lib/fastclick.js"></script>
<!-- NProgress -->
<script src="../vendors/nprogress/nprogress.js"></script>
<!-- validator -->
<script src="../vendors/validator/validator.js"></script>

<!-- Custom Theme Scripts -->
<script src="../build/js/custom.min.js"></script>
<script type="text/javascript">
    function  xiugai()

    {

        if(confirm("确定要修改吗吗？"))

        {

            return true;

        }

        else

        {

            return false;

        }

    }
    function  del()

    {

        if(confirm("确定要删除吗？"))

        {

            return true;

        }

        else

        {

            return false;

        }

    }
    $(document).ready(function () {



        $('#err1').hide();$('#err2').hide();$('#err3').hide();$('#err4').hide();$('#err5').hide();$('#err6').hide();$('#err7').hide();
        //失去焦点验证
        $("#demo-form2 input:text").blur(function () {
            var txtval=$(this).val();
            if(txtval==null ||txtval=='' )
            {
                $(this).parent().next("span").show();

            }else
            {
                $(this).parent().next("span").hide();
            }


        });
        $("#demo-form2 textarea ").blur(function () {
            var thtext=$(this).val();

            if(thtext==null ||thtext=='' )
            {
                $(this).parent().next("span").show();

            }else
            {
                $(this).parent().next("span").hide();

            }
        })
        //提交验证
        $('#tijiao').click(function(event){
            var data = $('#depCode').val();
            data = $.trim(data);
            if(data.length < 1) {
                $('#err1').show();
                event.preventDefault();
            } else {
                $('#err1').hide();
            }
            var data = $('#abbreviation').val();
            data = $.trim(data);
            if(data.length < 1) {
               $('#err2').show();
                event.preventDefault();
            } else {
                $('#err2').hide();
            }
            var data = $('#depName').val();
            data = $.trim(data);
            if(data.length < 1) {
                $('#err3').show();
                event.preventDefault();
            } else {
                $('#err3').hide();
            }
            var data = $('#address').val();
            data = $.trim(data);
            if(data.length < 1) {
                $('#err4').show();
                event.preventDefault();
            } else {
                $('#err4').hide();
            }
            var data = $('#introduction').val();
            data = $.trim(data);
            if(data.length < 1) {
                $('#err5').show();
                event.preventDefault();
            } else {
                $('#err5').hide();
            }
            var data = $('#remark').val();
            data = $.trim(data);
            if(data.length < 1) {
                $('#err6').show();
                event.preventDefault();
            } else {
                $('#err6').hide();
            }
            var data = $('#enable').val();
            data = $.trim(data);

            if(data =="请选择") {
                $("#err7").show();
                event.preventDefault();
            } else {
                $('#err7').hide();
            }
        });


        //获取所属部门
        $("#yincang  span").click(function () {
            $('#err1').hide();$('#err2').hide();$('#err3').hide();$('#err4').hide();$('#err5').hide();$('#err6').hide();$('#err7').hide();
            var depname=$(this).text();

            $("#depName").val(depname);
           //
            $.post("depNames",{'dname':depname},function (data) {
              // alert(data.depName);
         var depCode=data.depCode;
         var id=data.id;

                var abbreviation=data.abbreviation;
                var address=data.address;
                var introduction=data.introduction;
                var remark=data.remark;
               /* var enable=data.enable;*/

         $("#depCode").val(depCode)

                $("#idDep").val(id)
                $("#abbreviation").val(abbreviation)
                $("#address").val(address)
                $("#introduction").val(introduction)
                $("#remark").val(remark)
               /* $("#enable").val(enable)*/

            },"json")


        })



   })



</script>
<!-- validator -->
<script>
    // initialize the validator function
    validator.message.date = 'not a real date';

    // validate a field on "blur" event, a 'select' on 'change' event & a '.reuired' classed multifield on 'keyup':
    $('form')
        .on('blur', 'input[required], input.optional, select.required', validator.checkField)
        .on('change', 'select.required', validator.checkField)
        .on('keypress', 'input[required][pattern]', validator.keypress);

    $('.multi.required').on('keyup blur', 'input', function() {
        validator.checkField.apply($(this).siblings().last()[0]);
    });

    $('form').submit(function(e) {
        e.preventDefault();
        var submit = true;

        // evaluate the form using generic validaing
        if (!validator.checkAll($(this))) {
            submit = false;
        }

        if (submit)
            this.submit();

        return false;
    });
</script>
<!-- /validator -->
</body>
</html>