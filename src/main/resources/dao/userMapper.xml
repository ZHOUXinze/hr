<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.manage.hr.dao.UserDao">
   <insert id="addUser" parameterType="User">
INSERT INTO `user`(`userCode`,`userName`,`userRole`,`depId`,`password`,`phoneNumber`)
VALUES(#{userCode},#{userName},#{userRole},#{depId},#{password},#{phoneNumber})
   </insert>
   <select id="findAllUser" parameterType="int"  resultType="User" >
   SELECT u.id, u.userCode,u.userName,(SELECT dataName FROM dictionary AS d
WHERE id=u.userRole )AS dataName,(SELECT p.depName FROM department AS p
WHERE p.id=u.depId)AS depName ,u.password,u.phoneNumber
FROM `user` AS u

   </select>
<update id="updateUser" parameterType="User">
update `User` set
userCode=#{userCode},
userName=#{userName},
userRole=#{userRole},
depId=#{depId},
password=#{password},
phoneNumber=#{phoneNumber} where id=#{id}
</update>
<select id="findUserByID"  resultType="User">
     SELECT u.id,  u.userCode,u.depId,u.userRole, u.userName,(SELECT dataName FROM dictionary AS d
WHERE id=u.userRole )AS dataName,(SELECT p.depName FROM department AS p
WHERE p.id=u.depId)AS depName ,u.password,u.phoneNumber
FROM `user` AS u where id=#{userId}

</select>

</mapper>